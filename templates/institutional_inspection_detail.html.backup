<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Institutional Health Inspection Details - Form {{ inspection.id }}</title>
    <style>
        body {
            margin: 0;
            padding: 30px;
            background-color: #f0f0f0;
            background-image: url('{{ url_for("static", filename="d.jpg") }}');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .form-container {
            width: 10in;
            min-height: 13in;
            background: white;
            padding: 0.75in;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            border-radius: 12px;
            position: relative;
        }

        .form-header {
            text-align: center;
            border: 3px solid black;
            padding: 20px;
            margin-bottom: 30px;
            position: relative;
            background: #f9f9f9;
            border-radius: 8px;
        }

        .form-title {
            font-weight: bold;
            font-size: 20px;
            text-transform: uppercase;
            margin: 0;
            line-height: 1.4;
        }

        .form-number {
            position: absolute;
            top: 15px;
            right: 20px;
            color: red;
            font-weight: bold;
            font-size: 22px;
        }

        .form-id {
            position: absolute;
            top: 15px;
            left: 20px;
            color: blue;
            font-weight: bold;
            font-size: 16px;
        }

        .info-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .three-column {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .four-column {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .info-box {
            border: 2px solid #333;
            padding: 15px;
            min-height: 50px;
            position: relative;
            font-size: 14px;
            background: #fafafa;
            border-radius: 6px;
        }

        .info-label {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
            color: #333;
            text-transform: uppercase;
        }

        .info-value {
            font-size: 14px;
            font-weight: normal;
            color: #000;
            min-height: 20px;
            padding: 5px 0;
        }

        .date-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .date-display {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 10px;
        }

        .date-box {
            width: 60px;
            height: 40px;
            border: 2px solid #333;
            text-align: center;
            font-size: 14px;
            font-weight: bold;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
        }

        .date-label {
            font-size: 11px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 5px;
            color: #666;
        }

        .checkbox-section {
            background: #f5f5f5;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .checkbox-row {
            display: flex;
            gap: 25px;
            margin: 15px 0;
            align-items: center;
            font-size: 14px;
        }

        .checkbox-row strong {
            min-width: 150px;
            font-size: 15px;
        }

        .selected-option {
            background: #e3f2fd;
            border: 2px solid #007bff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: bold;
            color: #004085;
        }

        .unselected-options {
            color: #666;
            font-size: 12px;
        }

        .inspection-section {
            margin: 30px 0;
        }

        .two-column-tables {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .inspection-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 13px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .inspection-table th,
        .inspection-table td {
            border: 2px solid #333;
            padding: 12px 8px;
            text-align: left;
        }

        .inspection-table th {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 12px;
            text-transform: uppercase;
        }

        .inspection-table tbody tr:nth-child(even) {
            background: #f9f9f9;
        }

        .score-cell {
            width: 50px;
            text-align: center;
        }

        .score-display {
            width: 100%;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            padding: 6px;
            border-radius: 4px;
            color: white;
        }

        .score-full {
            background: #28a745;
        }

        .score-zero {
            background: #dc3545;
        }

        .section-header {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
            text-align: center;
            font-size: 13px;
            padding: 15px 8px;
        }

        .compliance-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #333;
        }

        .compliance-section strong {
            display: block;
            margin-bottom: 15px;
            font-size: 14px;
            color: #333;
        }

        .license-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .score-box {
            padding: 10px 15px;
            background: #e9ecef;
            border: 2px solid #333;
            border-radius: 6px;
            text-align: center;
            min-width: 80px;
            font-weight: bold;
            font-size: 14px;
        }

        .score-box.high {
            background: #d4edda;
            color: #155724;
        }

        .score-box.low {
            background: #f8d7da;
            color: #721c24;
        }

        .comments-section {
            margin: 30px 0;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #333;
        }

        .comments-section strong {
            font-size: 15px;
            color: #333;
            display: block;
            margin-bottom: 10px;
        }

        .comments-display {
            background: white;
            border: 2px solid #333;
            padding: 15px;
            border-radius: 6px;
            min-height: 80px;
            font-size: 13px;
            line-height: 1.5;
        }

        .signature-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
            padding: 30px;
            border: 2px solid #333;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .signature-box {
            text-align: center;
        }

        .signature-box strong {
            display: block;
            margin-bottom: 15px;
            font-size: 14px;
            color: #333;
        }

        .signature-display {
            border-bottom: 3px solid #333;
            width: 100%;
            height: 40px;
            font-size: 14px;
            text-align: center;
            padding: 10px 5px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .footer-note {
            margin-top: 25px;
            padding: 20px;
            font-size: 11px;
            color: #666;
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            border-radius: 6px;
            line-height: 1.5;
        }

        .page-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding: 15px;
            background: #f1f1f1;
            border-radius: 6px;
            font-size: 12px;
            color: #666;
        }

        .action-buttons {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .action-button {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s;
        }

        .btn-back {
            background: #6c757d;
            color: white;
        }

        .btn-back:hover {
            background: #545b62;
            transform: translateY(-1px);
        }

        .btn-download {
            background: #007bff;
            color: white;
        }

        .btn-download:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }

        .status-badge {
            position: absolute;
            top: 50px;
            right: 20px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-satisfactory {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }

        .status-unsatisfactory {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }

        .print-button {
            background: #17a2b8;
            color: white;
        }

        .print-button:hover {
            background: #138496;
            transform: translateY(-1px);
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .form-container {
                box-shadow: none;
                width: 100%;
                padding: 0.5in;
            }
            .action-buttons {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-header">
            <div class="form-number">58401</div>
            <div class="form-id">Form #{{ inspection.id }}</div>
            <div class="form-title">Ministry of Health<br>Institutional Health Inspection Form¬π</div>
            <div class="status-badge {{ 'status-satisfactory' if inspection.compliance_result == 'Satisfactory' else 'status-unsatisfactory' }}">
                {{ inspection.compliance_result or 'Not Set' }}
            </div>
        </div>

        <div class="info-section">
            <div class="info-box">
                <span class="info-label">Name of Establishment</span>
                <div class="info-value">{{ inspection.establishment_name or 'N/A' }}</div>
            </div>
            <div class="info-box">
                <span class="info-label">Owner/Operator</span>
                <div class="info-value">{{ inspection.owner_operator or 'N/A' }}</div>
            </div>
        </div>

        <div class="info-section">
            <div class="info-box">
                <span class="info-label">Address and Parish</span>
                <div class="info-value">{{ inspection.address or 'N/A' }}</div>
            </div>
            <div class="info-box">
                <span class="info-label">Inspector Name</span>
                <div class="info-value">{{ inspection.inspector_name or 'N/A' }}</div>
            </div>
        </div>

        <div class="three-column">
            <div class="info-box">
                <span class="info-label">Staff complement</span>
                <div class="info-value">{{ inspection.staff_complement or 'N/A' }}</div>
            </div>
            <div class="info-box">
                <span class="info-label">No. of Occupants</span>
                <div class="info-value">{{ inspection.occupants or 'N/A' }}</div>
            </div>
            <div class="info-box">
                <span class="info-label">Type of Institution¬π</span>
                <div class="info-value">{{ inspection.institution_type or 'N/A' }}</div>
            </div>
        </div>

        <div class="four-column">
            <div class="info-box">
                <span class="info-label">Building Size</span>
                <div class="info-value">{{ inspection.building_size or 'N/A' }}</div>
            </div>
            <div class="info-box">
                <span class="info-label">Telephone No.</span>
                <div class="info-value">{{ inspection.telephone or 'N/A' }}</div>
            </div>
            <div class="info-box">
                <span class="info-label">No. of Building(s)</span>
                <div class="info-value">{{ inspection.num_buildings or 'N/A' }}</div>
            </div>
            <div class="info-box">
                <span class="info-label">Critical Sc.</span>
                <div class="score-box {{ 'high' if (inspection.critical_score or 0) >= 60 else 'low' }}">
                    {{ "%.1f"|format(inspection.critical_score or 0) }}
                </div>
            </div>
        </div>

        <div class="date-section">
            <div class="info-box">
                <span class="info-label">Inspection Date</span>
                <div class="date-display">
                    <div>
                        <div class="date-label">DAY</div>
                        <div class="date-box">{{ inspection.inspection_day or '-' }}</div>
                    </div>
                    <div>
                        <div class="date-label">MONTH</div>
                        <div class="date-box">{{ inspection.inspection_month or '-' }}</div>
                    </div>
                    <div>
                        <div class="date-label">YEAR</div>
                        <div class="date-box" style="width: 80px;">{{ inspection.inspection_year or '-' }}</div>
                    </div>
                    <div>
                        <div class="date-label">INSPECTOR CODE</div>
                        <div class="date-box" style="width: 100px;">{{ inspection.inspector_code or '-' }}</div>
                    </div>
                    <div>
                        <div class="date-label">OVERALL SC.</div>
                        <div class="score-box {{ 'high' if (inspection.overall_score or 0) >= 80 else 'low' }}">
                            {{ "%.1f"|format(inspection.overall_score or 0) }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="info-box compliance-section">
                <strong>Compliance Result</strong>
                {% if inspection.compliance_result %}
                    <div class="selected-option">{{ inspection.compliance_result }}</div>
                {% else %}
                    <div class="unselected-options">Not determined</div>
                {% endif %}
            </div>
        </div>

        <div class="license-section">
            <div class="info-box">
                <span class="info-label">License No.</span>
                <div class="info-value">{{ inspection.license_no or 'N/A' }}</div>
            </div>
            <div class="info-box">
                <span class="info-label">Registration Status</span>
                {% if inspection.registration_status %}
                    <div class="selected-option">{{ inspection.registration_status }}</div>
                {% else %}
                    <div class="unselected-options">Not specified</div>
                {% endif %}
            </div>
        </div>

        <div class="checkbox-section">
            <div class="checkbox-row">
                <strong>Purpose of Visit:</strong>
                {% if inspection.purpose_of_visit %}
                    <div class="selected-option">{{ inspection.purpose_of_visit }}</div>
                    <div class="unselected-options">
                        (Other options: {% for option in ['Routine', 'Compliance', 'Re-inspection', 'Complaint'] if option != inspection.purpose_of_visit %}{{ option }}{% if not loop.last %}, {% endif %}{% endfor %})
                    </div>
                {% else %}
                    <div class="unselected-options">Not selected</div>
                {% endif %}
            </div>

            <div class="checkbox-row">
                <strong>Action:</strong>
                {% if inspection.action %}
                    <div class="selected-option">{{ inspection.action }}</div>
                    <div class="unselected-options">
                        (Other options: {% for option in ['Follow-up', 'Notice', 'Closure', 'N/A'] if option != inspection.action %}{{ option }}{% if not loop.last %}, {% endif %}{% endfor %})
                    </div>
                {% else %}
                    <div class="unselected-options">Not selected</div>
                {% endif %}
            </div>
        </div>

        <div class="inspection-section">
            <div class="two-column-tables">
                <table class="inspection-table">
                    <thead>
                        <tr>
                            <th style="width: 50px;">Item</th>
                            <th>Description</th>
                            <th class="score-cell">Wt</th>
                            <th class="score-cell">Sc</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="4" class="section-header">BUILDING</td>
                        </tr>
                        {% set items_first_table = [
                            ('01', 'Absence of overcrowding', 5, True),
                            ('02', 'Structural Integrity', 2, False),
                            ('03', 'Housekeeping', 2, False),
                            ('04', 'Clean Floor', 1, False),
                            ('05', 'Clean Walls', 1, False),
                            ('06', 'Clean Ceiling', 1, False),
                            ('07', 'Lighting', 1, False),
                            ('08', 'Ventilation', 3, False)
                        ] %}
                        {% for item_id, desc, weight, is_critical in items_first_table %}
                        <tr>
                            <td>{{ item_id }}</td>
                            <td>{{ desc }}</td>
                            <td class="score-cell">{{ weight }}</td>
                            <td class="score-cell">
                                {% set score = inspection.scores.get(item_id, 0) if inspection.scores else 0 %}
                                <div class="score-display {{ 'score-full' if score == weight else 'score-zero' }}">
                                    {{ score }}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="4" class="section-header">WATER SUPPLY</td>
                        </tr>
                        {% set water_items = [
                            ('09', 'Adequacy', 5, True),
                            ('10', 'Potability', 5, True)
                        ] %}
                        {% for item_id, desc, weight, is_critical in water_items %}
                        <tr>
                            <td>{{ item_id }}</td>
                            <td>{{ desc }}</td>
                            <td class="score-cell">{{ weight }}</td>
                            <td class="score-cell">
                                {% set score = inspection.scores.get(item_id, 0) if inspection.scores else 0 %}
                                <div class="score-display {{ 'score-full' if score == weight else 'score-zero' }}">
                                    {{ score }}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="4" class="section-header">EXCRETA DISPOSAL FACILITIES</td>
                        </tr>
                        {% set excreta_items = [
                            ('11', 'Sanitary excreta disposal', 5, True),
                            ('12', 'Adequacy', 5, True)
                        ] %}
                        {% for item_id, desc, weight, is_critical in excreta_items %}
                        <tr>
                            <td>{{ item_id }}</td>
                            <td>{{ desc }}</td>
                            <td class="score-cell">{{ weight }}</td>
                            <td class="score-cell">
                                {% set score = inspection.scores.get(item_id, 0) if inspection.scores else 0 %}
                                <div class="score-display {{ 'score-full' if score == weight else 'score-zero' }}">
                                    {{ score }}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="4" class="section-header">FOOD HANDLING FACILITIES¬≤</td>
                        </tr>
                        {% set food_items = [
                            ('13', 'Food Storage', 5, True),
                            ('14', 'Kitchen', 5, True),
                            ('15', 'Dining Room', 5, True),
                            ('16', 'Food handling practices', 5, True)
                        ] %}
                        {% for item_id, desc, weight, is_critical in food_items %}
                        <tr>
                            <td>{{ item_id }}</td>
                            <td>{{ desc }}</td>
                            <td class="score-cell">{{ weight }}</td>
                            <td class="score-cell">
                                {% set score = inspection.scores.get(item_id, 0) if inspection.scores else 0 %}
                                <div class="score-display {{ 'score-full' if score == weight else 'score-zero' }}">
                                    {{ score }}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="4" class="section-header">SOLID WASTE MANAGEMENT</td>
                        </tr>
                        {% set waste_items = [
                            ('17', 'Storage', 5, True),
                            ('18', 'Disposal', 5, True)
                        ] %}
                        {% for item_id, desc, weight, is_critical in waste_items %}
                        <tr>
                            <td>{{ item_id }}</td>
                            <td>{{ desc }}</td>
                            <td class="score-cell">{{ weight }}</td>
                            <td class="score-cell">
                                {% set score = inspection.scores.get(item_id, 0) if inspection.scores else 0 %}
                                <div class="score-display {{ 'score-full' if score == weight else 'score-zero' }}">
                                    {{ score }}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <table class="inspection-table">
                    <thead>
                        <tr>
                            <th style="width: 50px;">Item</th>
                            <th>Description</th>
                            <th class="score-cell">Wt</th>
                            <th class="score-cell">Sc</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="4" class="section-header">PESTS</td>
                        </tr>
                        {% set pest_items = [
                            ('19', 'Absence', 5, True),
                            ('20', 'Control system in place', 5, True)
                        ] %}
                        {% for item_id, desc, weight, is_critical in pest_items %}
                        <tr>
                            <td>{{ item_id }}</td>
                            <td>{{ desc }}</td>
                            <td class="score-cell">{{ weight }}</td>
                            <td class="score-cell">
                                {% set score = inspection.scores.get(item_id, 0) if inspection.scores else 0 %}
                                <div class="score-display {{ 'score-full' if score == weight else 'score-zero' }}">
                                    {{ score }}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="4" class="section-header">COMPOUND</td>
                        </tr>
                        {% set compound_items = [
                            ('21', 'General Cleanliness', 2, False),
                            ('22', 'Drainage', 2, False),
                            ('23', 'Protected from stray animals', 2, False),
                            ('24', 'Vegetation', 2, False)
                        ] %}
                        {% for item_id, desc, weight, is_critical in compound_items %}
                        <tr>
                            <td>{{ item_id }}</td>
                            <td>{{ desc }}</td>
                            <td class="score-cell">{{ weight }}</td>
                            <td class="score-cell">
                                {% set score = inspection.scores.get(item_id, 0) if inspection.scores else 0 %}
                                <div class="score-display {{ 'score-full' if score == weight else 'score-zero' }}">
                                    {{ score }}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="4" class="section-header">SAFETY MEASURES</td>
                        </tr>
                        {% set safety_items = [
                            ('25', 'Provision for physically challenged', 2, False),
                            ('26', 'Fire extinguishers', 5, True),
                            ('27', 'Access to medical care', 2, False),
                            ('28', 'First Aid available', 2, False),
                            ('29', 'Emergency exit', 2, False),
                            ('30', 'Veterinary certification of pets', 1, False)
                        ] %}
                        {% for item_id, desc, weight, is_critical in safety_items %}
                        <tr>
                            <td>{{ item_id }}</td>
                            <td>{{ desc }}</td>
                            <td class="score-cell">{{ weight }}</td>
                            <td class="score-cell">
                                {% set score = inspection.scores.get(item_id, 0) if inspection.scores else 0 %}
                                <div class="score-display {{ 'score-full' if score == weight else 'score-zero' }}">
                                    {{ score }}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="4" class="section-header">REFRIGERATION FOR NON-FOOD¬≥</td>
                        </tr>
                        <tr>
                            <td>31</td>
                            <td>Adequacy</td>
                            <td class="score-cell">2</td>
                            <td class="score-cell">
                                {% set score = inspection.scores.get('31', 0) if inspection.scores else 0 %}
                                <div class="score-display {{ 'score-full' if score == 2 else 'score-zero' }}">
                                    {{ score }}
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="comments-section">
            <strong>Inspector's Comments:</strong>
            <div class="comments-display">
                {{ inspection.comments or 'No comments provided.' }}
            </div>
        </div>

        <div class="signature-section">
            <div class="signature-box">
                <strong>Inspector's Signature</strong>
                <div class="signature-display">{{ inspection.inspector_signature or '' }}</div>
            </div>
            <div class="signature-box">
                <strong>Rec'd By:</strong>
                <div class="signature-display">{{ inspection.received_by or '' }}</div>
            </div>
        </div>

        <div class="footer-note">
            <strong>Comments:</strong><br>
            ¬π Institutions shall include: hospitals, infirmaries, nursing homes, day care centres, training schools, prisons, police stations and lockups, and places of safety.<br>
            ¬≤ Apply Food Handling Establishment Guidelines<br>
            ¬≥ Use where applicable
        </div>

        <div class="page-info">
            <span>Page 1 of 1</span>
            <span>EHU (Rev. May 2002)</span>
            <span>Submitted: {{ inspection.created_at if inspection.created_at else 'Date not available' }}</span>
        </div>

        <div class="action-buttons">
            <a href="/dashboard" class="action-button btn-back">‚Üê Back to Dashboard</a>
            <button onclick="window.print()" class="action-button print-button">üñ®Ô∏è Print Form</button>
            <a href="/institutional/inspection/{{ inspection.id }}/download" class="action-button btn-download">üì• Download PDF</a>
        </div>
    </div>

    <script>
        // Print functionality
        function printInspection() {
            window.print();
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl+P or Cmd+P for print
            if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
                e.preventDefault();
                window.print();
            }
            // Escape to go back
            if (e.key === 'Escape') {
                window.location.href = '/dashboard';
            }
        });

        // Add some interactivity for better UX
        document.addEventListener('DOMContentLoaded', function() {
            // Highlight score cells on hover
            const scoreCells = document.querySelectorAll('.score-display');
            scoreCells.forEach(cell => {
                cell.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.05)';
                    this.style.transition = 'transform 0.2s';
                });
                cell.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });

            // Add tooltip functionality for better understanding
            const criticalItems = ['01', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '26'];

            scoreCells.forEach((cell, index) => {
                const row = cell.closest('tr');
                const itemNumber = row.querySelector('td:first-child')?.textContent;

                if (criticalItems.includes(itemNumber)) {
                    cell.setAttribute('title', 'Critical Item - Must score full points for satisfactory compliance');
                    cell.style.border = '2px solid #ffc107';
                }
            });

            // Add smooth scrolling for better navigation
            document.documentElement.style.scrollBehavior = 'smooth';
        });

        // Add confirmation for navigation away
        window.addEventListener('beforeunload', function(e) {
            // Only show confirmation if user has been on page for more than 5 seconds
            const timeOnPage = Date.now() - performance.timing.navigationStart;
            if (timeOnPage > 5000) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>